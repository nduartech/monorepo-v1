---

---
<script>
  let page = document.documentElement;
  const eventClicked = () => {
    page.classList.contains("dark") ? page.classList.remove("dark") : page.classList.add("dark");
    window.localStorage.setItem("theme", window.localStorage.getItem("theme") === "light" ? "dark" : "light");
    dayNightSun = document.querySelector(".sun");
    dayNightMoon = document.querySelector(".moon");
    if (window.localStorage.getItem("theme") === "light" && dayNightMoon !== null && dayNightSun !== null) {
      dayNightSun.setAttribute("class", "sun hidden");
      dayNightMoon.setAttribute("class", "moon inline-flex");
    } else if (window.localStorage.getItem("theme") === "dark" && dayNightMoon !== null && dayNightSun !== null) {
      dayNightSun.setAttribute("class", "sun inline-flex");
      dayNightMoon.setAttribute("class", "moon hidden");
    }
  };

  let dayNightButton:any = null;
  let dayNightSun:any = null;
  let dayNightMoon:any = null;

  const pageLoaded = () => {

    const theme = (() => {
      if (typeof window.localStorage && window.localStorage.getItem("theme")) {
        return window.localStorage.getItem("theme");
      } else if (document.documentElement.dataset.theme) {
        return document.documentElement.dataset.theme;
      }
      if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
        return "dark";
      }
      return "light";
    })();

    if (theme === "light") {
      if (document.documentElement.classList.contains("dark")) {
        document.documentElement.classList.remove("dark");
        document.documentElement.dataset.theme = 'light';
        window.localStorage.setItem("theme", theme);
      }
    } else if (theme === "dark") {
      if (!document.documentElement.classList.contains("dark")) {
        document.documentElement.classList.add("dark");
        document.documentElement.dataset.theme = 'dark';
        window.localStorage.setItem("theme", theme);
      }
    }
    dayNightButton = document.querySelector(".dayNight");
    dayNightSun = document.querySelector(".sun");
    dayNightMoon = document.querySelector(".moon");
    if (theme === "light" && dayNightMoon !== null && dayNightSun !== null) {
      dayNightSun.setAttribute("class","sun hidden");
      dayNightMoon.setAttribute("class", "moon inline-flex");
    } else if (theme === "dark" && dayNightMoon !== null && dayNightSun !== null) {
      dayNightSun.setAttribute("class","sun inline-flex");
      dayNightMoon.setAttribute("class", "moon hidden");
    }

    dayNightButton.addEventListener("click", eventClicked);
  };

  document.addEventListener("astro:page-load", pageLoaded);
  document.addEventListener("astro:before-preparation", () => {
    dayNightButton && dayNightButton.removeEventListener("click", eventClicked);
    dayNightButton = null;
  });
</script>
<div class="dayNight z-50 cursor-pointer">
  <div class="moon"><i class="iconoir-half-moon before:size-8 before:text-regal-blue-100"></i></div>
  <div class="sun"><i class="iconoir-sun-light before:size-8 before:text-regal-blue-100"></i></div>
</div>
