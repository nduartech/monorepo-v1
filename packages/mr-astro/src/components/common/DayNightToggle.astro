---
import sun from "../../../public/sun-light.svg";
import moon from "../../../public/half-moon.svg";
---
<style>
    @tailwind base;
    @tailwind components;
    @tailwind utilities;

    @layer {
        svg .svg-elem-1 {
            stroke-dashoffset: 39.704383850097656px;
            stroke-dasharray: 39.704383850097656px;
            -webkit-transition: stroke-dashoffset 1s cubic-bezier(0.215, 0.61, 0.355, 1) 0s;
            transition: stroke-dashoffset 1s cubic-bezier(0.215, 0.61, 0.355, 1) 0s
        }

        svg.active .svg-elem-1 {
            stroke-dashoffset: 0
        }

        svg .svg-elem-2 {
            stroke-dashoffset: 3px;
            stroke-dasharray: 3px;
            -webkit-transition: stroke-dashoffset 1s cubic-bezier(0.215, 0.61, 0.355, 1) 0.12s;
            transition: stroke-dashoffset 1s cubic-bezier(0.215, 0.61, 0.355, 1) 0.12s
        }

        svg.active .svg-elem-2 {
            stroke-dashoffset: 0
        }

        svg .svg-elem-3 {
            stroke-dashoffset: 3px;
            stroke-dasharray: 3px;
            -webkit-transition: stroke-dashoffset 1s cubic-bezier(0.215, 0.61, 0.355, 1) 0.24s;
            transition: stroke-dashoffset 1s cubic-bezier(0.215, 0.61, 0.355, 1) 0.24s
        }

        svg.active .svg-elem-3 {
            stroke-dashoffset: 0
        }

        svg .svg-elem-4 {
            stroke-dashoffset: 3px;
            stroke-dasharray: 3px;
            -webkit-transition: stroke-dashoffset 1s cubic-bezier(0.215, 0.61, 0.355, 1) 0.36s;
            transition: stroke-dashoffset 1s cubic-bezier(0.215, 0.61, 0.355, 1) 0.36s
        }

        svg.active .svg-elem-4 {
            stroke-dashoffset: 0
        }

        svg .svg-elem-5 {
            stroke-dashoffset: 3.414213538169861px;
            stroke-dasharray: 3.414213538169861px;
            -webkit-transition: stroke-dashoffset 1s cubic-bezier(0.215, 0.61, 0.355, 1) 0.48s;
            transition: stroke-dashoffset 1s cubic-bezier(0.215, 0.61, 0.355, 1) 0.48s
        }

        svg.active .svg-elem-5 {
            stroke-dashoffset: 0
        }

        svg .svg-elem-6 {
            stroke-dashoffset: 3.414213538169861px;
            stroke-dasharray: 3.414213538169861px;
            -webkit-transition: stroke-dashoffset 1s cubic-bezier(0.215, 0.61, 0.355, 1) 0.6s;
            transition: stroke-dashoffset 1s cubic-bezier(0.215, 0.61, 0.355, 1) 0.6s
        }

        svg.active .svg-elem-6 {
            stroke-dashoffset: 0
        }

        svg .svg-elem-7 {
            stroke-dashoffset: 3.414213538169861px;
            stroke-dasharray: 3.414213538169861px;
            -webkit-transition: stroke-dashoffset 1s cubic-bezier(0.215, 0.61, 0.355, 1) 0.72s;
            transition: stroke-dashoffset 1s cubic-bezier(0.215, 0.61, 0.355, 1) 0.72s
        }

        svg.active .svg-elem-7 {
            stroke-dashoffset: 0
        }

        svg .svg-elem-8 {
            stroke-dashoffset: 3.414213538169861px;
            stroke-dasharray: 3.414213538169861px;
            -webkit-transition: stroke-dashoffset 1s cubic-bezier(0.215, 0.61, 0.355, 1) 0.84s;
            transition: stroke-dashoffset 1s cubic-bezier(0.215, 0.61, 0.355, 1) 0.84s
        }

        svg.active .svg-elem-8 {
            stroke-dashoffset: 0
        }

        svg .svg-elem-9 {
            stroke-dashoffset: 3px;
            stroke-dasharray: 3px;
            -webkit-transition: stroke-dashoffset 1s cubic-bezier(0.215, 0.61, 0.355, 1) 0.96s;
            transition: stroke-dashoffset 1s cubic-bezier(0.215, 0.61, 0.355, 1) 0.96s
        }

        svg.active .svg-elem-9 {
            stroke-dashoffset: 0
        }

        svg .svg-elem-1 {
            stroke-dashoffset: 58.66685485839844px;
            stroke-dasharray: 58.66685485839844px;
            -webkit-transition: stroke-dashoffset 1s cubic-bezier(0.215, 0.61, 0.355, 1) 0s;
            transition: stroke-dashoffset 1s cubic-bezier(0.215, 0.61, 0.355, 1) 0s
        }

        svg.active .svg-elem-1 {
            stroke-dashoffset: 0
        }
    }
</style>
<script>
  import * as console from "node:console";

  let page = document.documentElement;
  let metaTheme = document.querySelector("meta[name=\"theme-color\"]");

  const eventClicked = () => {
    let dayNightButton = document.querySelector(".dayNight");
    page.classList.contains("dark") ? page.classList.remove("dark") : page.classList.add("dark");
    window.localStorage.setItem("theme", window.localStorage.getItem("theme") === "light" ? "dark" : "light");
    // dayNightSun = document.querySelector(".sun svg");
    // dayNightMoon = document.querySelector(".moon svg");
    if (window.localStorage.getItem("theme") === "light") {
      page.dataset.theme = "light";
      dayNightSun = document.querySelector(".sun svg");
      dayNightSun.classList.contains("active") ? dayNightSun.classList.remove("active") : void (0);
      setTimeout(function() {
        dayNightSun.classList.remove("w-8", "h-8");
        dayNightSun.classList.add("hidden", "w-0", "h-0");
      }, 300);
      setTimeout(function() {
        dayNightMoon = document.querySelector(".moon svg");
        dayNightMoon.classList.remove("hidden", "w-0", "h-0");
        dayNightMoon.classList.add("w-8", "h-8");
        setTimeout(function() {
          dayNightMoon.classList.contains("active") ? void (0) : dayNightMoon.classList.add("active");
        }, 300);
      }, 300);
      if (metaTheme) {
        metaTheme.setAttribute("content", "#23bcff");
      }
    } else if (window.localStorage.getItem("theme") === "dark") {
      page.dataset.theme = "dark";
      dayNightMoon = document.querySelector(".moon svg");
      dayNightMoon.classList.contains("active") ? dayNightMoon.classList.remove("active") : void (0);
      setTimeout(function() {
        dayNightMoon.classList.remove("w-8", "h-8");
        dayNightMoon.classList.add("hidden", "w-0", "h-0");
      }, 300);
      setTimeout(function() {
        dayNightSun = document.querySelector(".sun svg");
        dayNightSun.classList.remove("hidden", "w-0", "h-0");
        dayNightSun.classList.add("w-8", "h-8");
        setTimeout(function() {
          dayNightSun.classList.contains("active") ? void (0) : dayNightSun.classList.add("active");
        }, 300);
      }, 300);
      if (metaTheme) {
        metaTheme.setAttribute("content", "#012d50");
      }
    }
  };

  let dayNightButton: any = null;
  let dayNightSun: any = null;
  let dayNightMoon: any = null;

  const pageLoaded = () => {

    const theme = (() => {
      if (typeof window.localStorage && window.localStorage.getItem("theme")) {
        return window.localStorage.getItem("theme");
      } else if (document.documentElement.dataset.theme) {
        return document.documentElement.dataset.theme;
      }
      if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
        return "dark";
      }
      return "light";
    })();
    let dayNightButton = document.querySelector(".dayNight");

    if (theme === "light") {
      if (document.documentElement.classList.contains("dark")) {
        document.documentElement.classList.remove("dark");
        document.documentElement.dataset.theme = "light";
        window.localStorage.setItem("theme", theme);
        if (metaTheme) {
          metaTheme.setAttribute("content", "#23bcff");
        }
      }
    } else if (theme === "dark") {
      if (!document.documentElement.classList.contains("dark")) {
        document.documentElement.classList.add("dark");
        document.documentElement.dataset.theme = "dark";
        window.localStorage.setItem("theme", theme);
        if (metaTheme) {
          metaTheme.setAttribute("content", "#012d50");
        }
      }
    }
    if (window.localStorage.getItem("theme") === "light") {
      page.dataset.theme = "light";
      dayNightSun = document.querySelector(".sun svg");
      dayNightSun.classList.contains("active") ? dayNightSun.classList.remove("active") : void (0);
      setTimeout(function() {
        dayNightSun.classList.remove("w-8", "h-8");
        dayNightSun.classList.add("hidden", "w-0", "h-0");
      }, 300);
      setTimeout(function() {
        dayNightMoon = document.querySelector(".moon svg");
        dayNightMoon.classList.remove("hidden", "w-0", "h-0");
        dayNightMoon.classList.add("w-8", "h-8");
        setTimeout(function() {
          dayNightMoon.classList.contains("active") ? void (0) : dayNightMoon.classList.add("active");
        }, 300);
      }, 300);
      if (metaTheme) {
        metaTheme.setAttribute("content", "#23bcff");
      }
    } else if (window.localStorage.getItem("theme") === "dark") {
      page.dataset.theme = "dark";
      dayNightMoon = document.querySelector(".moon svg");
      dayNightMoon.classList.contains("active") ? dayNightMoon.classList.remove("active") : void (0);
      setTimeout(function() {
        dayNightMoon.classList.remove("w-8", "h-8");
        dayNightMoon.classList.add("hidden", "w-0", "h-0");
      }, 300);
      setTimeout(function() {
        dayNightSun = document.querySelector(".sun svg");
        dayNightSun.classList.remove("hidden", "w-0", "h-0");
        dayNightSun.classList.add("w-8", "h-8");
        setTimeout(function() {
          dayNightSun.classList.contains("active") ? void (0) : dayNightSun.classList.add("active");
        }, 300);
      }, 300);
      if (metaTheme) {
        metaTheme.setAttribute("content", "#012d50");
      }
    }

    if (dayNightButton !== null) {
      dayNightButton.addEventListener("click", eventClicked);
    }
  };

  document.addEventListener("astro:page-load", pageLoaded);
  document.addEventListener("astro:before-preparation", () => {
    dayNightButton && dayNightButton.removeEventListener("click", eventClicked);
    dayNightButton = null;
  });
</script>
<div class="dayNight z-50 cursor-pointer mt-0.5 mr-0.5 lg:mt-2 lg:mr-2">
  <div class="sun">
    <svg class="w-9 h-9" stroke-width="0.9" fill="none" xmlns="http://www.w3.org/2000/svg" color="#ddf2ff" viewBox="0.4 0.4 23.2 23.2">       <path d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z" stroke="#ddf2ff" stroke-width="0.9" stroke-linecap="round" stroke-linejoin="round" class="svg-elem-1"></path>       <path d="M22 12L23 12" stroke="#ddf2ff" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" class="svg-elem-2"></path>       <path d="M12 2V1" stroke="#ddf2ff" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" class="svg-elem-3"></path>       <path d="M12 23V22" stroke="#ddf2ff" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" class="svg-elem-4"></path>       <path d="M20 20L19 19" stroke="#ddf2ff" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" class="svg-elem-5"></path>       <path d="M20 4L19 5" stroke="#ddf2ff" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" class="svg-elem-6"></path>       <path d="M4 20L5 19" stroke="#ddf2ff" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" class="svg-elem-7"></path>       <path d="M4 4L5 5" stroke="#ddf2ff" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" class="svg-elem-8"></path>       <path d="M1 12L2 12" stroke="#ddf2ff" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" class="svg-elem-9"></path>     </svg>
  </div>
  <div class="moon">
    <svg class="w-7 h-7" stroke-width="0.9" fill="none" xmlns="http://www.w3.org/2000/svg" color="#ddf2ff"
         viewBox="2.55 2.55 18.9 18.9">
      <path
        d="M3 11.5066C3 16.7497 7.25034 21 12.4934 21C16.2209 21 19.4466 18.8518 21 15.7259C12.4934 15.7259 8.27411 11.5066 8.27411 3C5.14821 4.55344 3 7.77915 3 11.5066Z"
        stroke="#ddf2ff" stroke-width="0.9" stroke-linecap="round" stroke-linejoin="round" class="svg-elem-1"></path>
    </svg>
  </div>
</div>
